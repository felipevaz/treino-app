<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Treino</title>

  <!-- Fonte Outfit -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --text: #e5e7eb;
      --muted: #64748b;
      --neg: #ef4444;
    }

    body {
      font-family: 'Outfit', sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 14px;
    }

    h1 {
      text-align: center;
      font-size: 2.4em;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .exercise {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 18px;
    }

    .title {
      font-size: 1.4em;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .row span {
      background: #020617;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.95em;
    }

    .row span[contenteditable] {
      border-bottom: 1px dashed var(--text);
    }

    .obs {
      background: #020617;
      padding: 6px;
      border-radius: 6px;
      font-size: 0.9em;
      margin-bottom: 10px;
    }

    .obs[contenteditable] {
      border: 1px dashed var(--text);
    }

    .grid {
      display: grid;
      grid-template-rows: auto repeat(3, auto);
      gap: 10px;
    }

    .button-row {
      display: flex;
      gap: 10px;
    }

    button {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      font-size: 0.95em;
      color: black;
      min-width: 0;
    }

    .start {
      background: #22c55e;
    }

    .finish {
      background: #38bdf8;
    }

    .blink {
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.4;
      }

      100% {
        opacity: 1;
      }
    }

    .timer {
      font-size: 2.6em;
      font-weight: 700;
      text-align: center;
      margin-bottom: 8px;
      color: var(--muted);
    }
  </style>

</head>

<body>

  <h1>Treino</h1>

  <div id="app"></div>

  <script>

    /* ================= DADOS ================= */

    const exercises = [

      {
        name: "Mobilidade",
        reps: "Sequência",
        load: "0 kg",
        mobility: true,
        list: [
          "Floppy arm – 10",
          "Cat/cow – 10",
          "Forward roll – 10",
          "Best stretch – 10",
          "Saudação – 3"
        ]
      },

      {
        name: "Prancha",
        reps: "30 s",
        load: "0 kg",
        time: 30,
        rest: 30
      },
      {
        name: "Avião / Remada",
        reps: "10 / 10–12",
        load: "0 kg / elástico",
        time: 40,
        rest: 30
      },
      {
        name: "Pallof",
        reps: "10–12 / lado",
        load: "elástico",
        time: 40,
        rest: 30
      },
      {
        name: "Barra fixa",
        reps: "6–8 / 10–12",
        load: "peso corporal",
        time: 40,
        rest: 0
      },
      {
        name: "Agachamento",
        reps: "12",
        load: "5 kg",
        time: 40,
        rest: 30
      },
      {
        name: "Terra KB",
        reps: "12",
        load: "15 kg",
        time: 40,
        rest: 30
      },
      {
        name: "Flexão",
        reps: "8–12",
        load: "peso corporal",
        time: 40,
        rest: 30
      },
      {
        name: "Final – Ombro",
        reps: "Rotação ext. 10 / Sleeper 1",
        load: "4 kg / sem peso",
        mobility: true,
        list: [
          "Rotação externa do antebraço – 10 (4 kg)",
          "Sleepers stretch – 1 (sem peso)"
        ]
      }

    ];

    /* ================= TIMER ================= */

    let currentTimer = null;

    function startCountdown(seconds, display, btn) {
      clearInterval(currentTimer);

      document.querySelectorAll(".blink").forEach(b => b.classList.remove("blink"));

      btn.classList.add("blink");
      display.style.color = window.getComputedStyle(btn).backgroundColor;

      let t = seconds;

      display.textContent = format(t);

      currentTimer = setInterval(() => {
        t--;
        display.textContent = format(t);

        if (t < 0) {
          display.style.color = "var(--neg)";
        }

      }, 1000);
    }

    function format(s) {
      const sign = s < 0 ? "-" : "";
      s = Math.abs(s);
      return sign + "0:" + s.toString().padStart(2, "0");
    }

    /* ================= RENDER ================= */

    const app = document.getElementById("app");

    function render() {
      exercises.forEach((ex, i) => {

        const div = document.createElement("div");
        div.className = "exercise";

        let mobilityHTML = "";
        if (ex.mobility) {
          mobilityHTML = `
        <ul>
          ${ex.list.map(e => `<li>${e}</li>`).join("")}
        </ul>
      `;
        }

        let seriesHTML = "";
        if (!ex.mobility) {
          seriesHTML = `
        <div class="timer" id="timer${i}">0:00</div>
        <div class="button-row">
          <button class="start">▶ Série 1</button>
          <button class="finish">✔ Descanso</button>
        </div>
        <div class="button-row">
          <button class="start">▶ Série 2</button>
          <button class="finish">✔ Descanso</button>
        </div>
        <div class="button-row">
          <button class="start">▶ Série 3</button>
          <button class="finish">✔ Descanso</button>
        </div>
      `;
        }

        div.innerHTML = `
      <div class="title">${i + 1}. ${ex.name}</div>

      <div class="row">
        <span>Reps:</span>
        <span contenteditable>${ex.reps}</span>

        <span>Carga:</span>
        <span contenteditable>${ex.load}</span>
      </div>

      <div class="obs" contenteditable>Observações...</div>

      ${mobilityHTML}
      ${!ex.mobility ? `<div class="grid">${seriesHTML}</div>` : ""}
    `;

        app.appendChild(div);
      });

    }

    /* ================= BIND BUTTONS ================= */

    function bindButtons() {
      document.querySelectorAll(".exercise").forEach((box, i) => {

        if (exercises[i].mobility) return;

        const timer = box.querySelector(".timer");

        const starts = box.querySelectorAll(".start");
        const finishes = box.querySelectorAll(".finish");

        starts.forEach((btn, idx) => {
          btn.addEventListener("click", () => {
            startCountdown(exercises[i].time, timer, btn);
          });
        });

        finishes.forEach((btn, idx) => {
          btn.addEventListener("click", () => {
            startCountdown(exercises[i].rest, timer, btn);

            const startBtn = starts[idx];
            startBtn.disabled = true;
            startBtn.classList.add("done");
            startBtn.textContent = "Feito";
          });
        });

      });
    }

    /* ================= INIT ================= */

    render();
    bindButtons();

  </script>

</body>

</html>